<!DOCTYPE html>
<!-- saved from url=(0067)http://developer.android.com/guide/topics/connectivity/wifip2p.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">



<meta name="viewport" content="width=device-width">

<meta name="Description" content="Wi-Fi peer-to-peer (P2P) allows Android 4.0 (API level 14) or later devices with the appropriate hardware to connect directly to each other via Wi-Fi without an intermediate access point (Android&#39;s Wi-Fi P2P framework complies with the Wi-Fi Alliance…">
<link rel="shortcut icon" type="image/x-icon" href="http://developer.android.com/favicon.ico">
<title>Wi-Fi Peer-to-Peer | Android Developers</title>

<!-- STYLESHEETS -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold" title="roboto">
<link href="./Wi-Fi Peer-to-Peer   Android Developers_files/default.css" rel="stylesheet" type="text/css">



<!-- JAVASCRIPT -->
<script src="./Wi-Fi Peer-to-Peer   Android Developers_files/cb=gapi.loaded_1" async=""></script><script src="./Wi-Fi Peer-to-Peer   Android Developers_files/cb=gapi.loaded_0" async=""></script><script type="text/javascript" async="" src="./Wi-Fi Peer-to-Peer   Android Developers_files/plusone.js" gapi_processed="true"></script><script async="" src="./Wi-Fi Peer-to-Peer   Android Developers_files/analytics.js"></script><script src="./Wi-Fi Peer-to-Peer   Android Developers_files/jsapi" type="text/javascript"></script>
<script src="./Wi-Fi Peer-to-Peer   Android Developers_files/android_3p-bundle.js" type="text/javascript"></script>
<script type="text/javascript">
  var toRoot = "/";
  var metaTags = ["wireless","wifip2pmanager","wi-fidirect","wifidirect","p2p","wi-fip2p","wifip2p"];
  var devsite = false;
</script>
<script src="./Wi-Fi Peer-to-Peer   Android Developers_files/docs.js" type="text/javascript"></script><script type="text/javascript" src="./Wi-Fi Peer-to-Peer   Android Developers_files/saved_resource"></script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5831155-1', 'android.com');
  ga('create', 'UA-49880327-2', 'android.com', {'name': 'universal'});  // New tracker);
  ga('send', 'pageview');
  ga('universal.send', 'pageview'); // Send page view for new tracker.
</script>

<link type="text/css" href="./Wi-Fi Peer-to-Peer   Android Developers_files/default+fr.css" rel="stylesheet"><script type="text/javascript" src="./Wi-Fi Peer-to-Peer   Android Developers_files/default+fr.I.js"></script></head>

<body class="gc-documentation

develop guide" itemscope="" itemtype="http://schema.org/Article">

<a name="top"></a>

<!-- dialog to prompt lang pref change when loaded from hardcoded URL 
<div id="langMessage" style="display:none">
  <div>
    <div class="lang en">
      <p>You requested a page in English, would you like to proceed with this language setting?</p>
    </div>
    <div class="lang es">
      <p>You requested a page in Spanish (Español), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang ja">
      <p>You requested a page in Japanese (日本語), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang ko">
      <p>You requested a page in Korean (한국어), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang ru">
      <p>You requested a page in Russian (Русский), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang zh-cn">
      <p>You requested a page in Simplified Chinese (简体中文), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang zh-tw">
      <p>You requested a page in Traditional Chinese (繁體中文), would you like to proceed with this language setting?</p>
    </div>
    <a href="#" class="button yes" onclick="return false;">
      <span class="lang en">Yes</span>
      <span class="lang es">Sí</span>
      <span class="lang ja">Yes</span>
      <span class="lang ko">Yes</span>
      <span class="lang ru">Yes</span>
      <span class="lang zh-cn">是的</span>
      <span class="lang zh-tw">没有</span>
    </a>
    <a href="#" class="button" onclick="$('#langMessage').hide();return false;">
      <span class="lang en">No</span>
      <span class="lang es">No</span>
      <span class="lang ja">No</span>
      <span class="lang ko">No</span>
      <span class="lang ru">No</span>
      <span class="lang zh-cn">没有</span>
      <span class="lang zh-tw">没有</span>
    </a>
  </div>
</div> -->


  <!-- Header -->
  <div id="header-wrapper">
    <div id="header">

    


      <div class="wrap" id="header-wrap">
        <div class="col-3 logo">
          <a href="http://developer.android.com/index.html">
            <img src="./Wi-Fi Peer-to-Peer   Android Developers_files/dac_logo.png" srcset="/assets/images/dac_logo@2x.png 2x" width="123" height="25" alt="Android Developers">
          </a>
          <div class="btn-quicknav" id="btn-quicknav">
            <a href="http://developer.android.com/guide/topics/connectivity/wifip2p.html#" class="arrow-inactive">Quicknav</a>
            <a href="http://developer.android.com/guide/topics/connectivity/wifip2p.html#" class="arrow-active">Quicknav</a>
          </div>
        </div>
        <ul class="nav-x col-9">
            <li class="design">
              <a href="http://developer.android.com/design/index.html" zh-tw-lang="設計" zh-cn-lang="设计" ru-lang="Проектирование" ko-lang="디자인" ja-lang="設計" es-lang="Diseñar">Design</a></li>
            <li class="develop"><a href="http://developer.android.com/develop/index.html" zh-tw-lang="開發" zh-cn-lang="开发" ru-lang="Разработка" ko-lang="개발" ja-lang="開発" es-lang="Desarrollar" class="selected">Develop</a></li>
            <li class="distribute last"><a href="http://developer.android.com/distribute/index.html" zh-tw-lang="發佈" zh-cn-lang="分发" ru-lang="Распространение" ko-lang="배포" ja-lang="配布" es-lang="Distribuir">Distribute</a></li>
        </ul>


        
        
<div class="menu-container">
  <div class="moremenu">
    <div id="more-btn"></div>
  </div>
  <div class="morehover" id="moremenu">
    <div class="top"></div>
    <div class="mid">
      <div class="header">Links</div>
      <ul>
        <li><a href="https://play.google.com/apps/publish/" target="_googleplay">Google Play Developer Console</a></li>
        <li><a href="http://android-developers.blogspot.com/">Android Developers Blog</a></li>
        <li><a href="http://developer.android.com/about/index.html">About Android</a></li>
      </ul>
      <div class="header">Android Sites</div>
      <ul>
        <li><a href="http://www.android.com/">Android.com</a></li>
        <li class="active"><a>Android Developers</a></li>
        <li><a href="http://source.android.com/">Android Open Source Project</a></li>
      </ul>

      
      
        <div class="header">Language</div>
          <div id="language" class="locales">
            <select name="language" onchange="changeLangPref(this.value, true)">
                <option value="en" selected="selected">English</option>
                <option value="es">Español</option>
                <option value="ja">日本語</option>
                <option value="ko">한국어</option>
                <option value="ru">Русский</option>
                <option value="zh-cn">中文（简体)</option>
                <option value="zh-tw">中文（繁體)</option>
            </select>
          </div>
        <script type="text/javascript">
          <!--
          loadLangPref();
            //-->
        </script>
      
      
      <br class="clearfix">
    </div><!-- end 'mid' -->
    <div class="bottom"></div>
  </div><!-- end 'moremenu' -->

  <div class="search" id="search-container">
    <div class="search-inner">
      <div id="search-btn"></div>
      <div class="left"></div>
      <form onsubmit="return submit_search()">
        <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q" onfocus="search_focus_changed(this, true)" onblur="search_focus_changed(this, false)" onkeydown="return search_changed(event, true, &#39;/&#39;)" onkeyup="return search_changed(event, false, &#39;/&#39;)">
      </form>
      <div class="right"></div>
      <a class="close hide">close</a>
      <div class="left"></div>
      <div class="right"></div>
    </div><!-- end search-inner -->
  </div><!-- end search-container -->

  <div class="search_filtered_wrapper reference">
    <div class="suggest-card reference no-display">
      <ul class="search_filtered">
      </ul>
    </div>
  </div>

  <div class="search_filtered_wrapper docs">
    <div class="suggest-card dummy no-display">&nbsp;</div>
    <div class="suggest-card develop no-display">
      <ul class="search_filtered">
      </ul>
      <div class="child-card guides no-display">
      </div>
      <div class="child-card training no-display">
      </div>
      <div class="child-card samples no-display">
      </div>
    </div>
    <div class="suggest-card design no-display">
      <ul class="search_filtered">
      </ul>
    </div>
    <div class="suggest-card distribute no-display">
      <ul class="search_filtered">
      </ul>
    </div>
  </div>
</div><!-- end menu-container (search and menu widget) -->



        <!-- Expanded quicknav -->
        <div id="quicknav" class="col-13">
          <ul>
            <li class="about">
              <ul>
                <li><a href="http://developer.android.com/about/index.html">About</a></li>
                <li><a href="http://developer.android.com/wear/index.html">Wear</a></li>
                <li><a href="http://developer.android.com/tv/index.html">TV</a></li>
                <li><a href="http://developer.android.com/auto/index.html">Auto</a></li>
              </ul>
            </li>
            <li class="design">
              <ul>
                <li><a href="http://developer.android.com/design/index.html">Get Started</a></li>
                <li><a href="http://developer.android.com/design/devices.html">Devices</a></li>
                <li><a href="http://developer.android.com/design/style/index.html">Style</a></li>
                <li><a href="http://developer.android.com/design/patterns/index.html">Patterns</a></li>
                <li><a href="http://developer.android.com/design/building-blocks/index.html">Building Blocks</a></li>
                <li><a href="http://developer.android.com/design/downloads/index.html">Downloads</a></li>
                <li><a href="http://developer.android.com/design/videos/index.html">Videos</a></li>
              </ul>
            </li>
            <li class="develop">
              <ul>
                <li><a href="http://developer.android.com/training/index.html" zh-tw-lang="訓練課程" zh-cn-lang="培训" ru-lang="Курсы" ko-lang="교육" ja-lang="トレーニング" es-lang="Capacitación" class="selected">Training</a></li>
                <li><a href="http://developer.android.com/guide/index.html" zh-tw-lang="API 指南" zh-cn-lang="API 指南" ru-lang="Руководства по API" ko-lang="API 가이드" ja-lang="API ガイド" es-lang="Guías de la API" class="selected">API Guides</a></li>
                <li><a href="http://developer.android.com/reference/packages.html" zh-tw-lang="參考資源" zh-cn-lang="参考" ru-lang="Справочник" ko-lang="참조문서" ja-lang="リファレンス" es-lang="Referencia" class="selected">Reference</a></li>
                <li><a href="http://developer.android.com/sdk/index.html" zh-tw-lang="相關工具" zh-cn-lang="工具" ru-lang="Инструменты" ko-lang="도구" ja-lang="ツール" es-lang="Herramientas" class="selected">Tools</a>
                </li>
                <li><a href="http://developer.android.com/google/index.html" class="selected">Google Services</a>
                </li>
                
                  <li><a href="http://developer.android.com/samples/index.html" class="selected">Samples</a>
                  </li>
                
              </ul>
            </li>
            <li class="distribute last">
              <ul>
                <li><a href="http://developer.android.com/distribute/googleplay/index.html">Google Play</a></li>
                <li><a href="http://developer.android.com/distribute/essentials/index.html">Essentials</a></li>
                <li><a href="http://developer.android.com/distribute/users/index.html">Get Users</a></li>
                <li><a href="http://developer.android.com/distribute/engage/index.html">Engage &amp; Retain</a></li>
                <li><a href="http://developer.android.com/distribute/monetize/index.html">Monetize</a></li>
                <li><a href="http://developer.android.com/distribute/analyze/index.html">Analyze</a></li>
                <li><a href="http://developer.android.com/distribute/tools/index.html">Tools &amp; Reference</a></li>
                <li><a href="http://developer.android.com/distribute/stories/index.html">Developer Stories</a></li>
              </ul>
            </li>
          </ul>
        </div><!-- /Expanded quicknav -->
      </div><!-- end header-wrap.wrap -->
    </div><!-- end header -->

  
    <!-- Secondary x-nav -->
    <div id="nav-x">
        <div class="wrap" style="position:relative;z-index:1">

        

            <ul class="nav-x col-9 develop" style="width:100%">
                <li class="training"><a href="http://developer.android.com/training/index.html" zh-tw-lang="訓練課程" zh-cn-lang="培训" ru-lang="Курсы" ko-lang="교육" ja-lang="トレーニング" es-lang="Capacitación">Training</a></li>
                <li class="guide"><a href="http://developer.android.com/guide/index.html" zh-tw-lang="API 指南" zh-cn-lang="API 指南" ru-lang="Руководства по API" ko-lang="API 가이드" ja-lang="API ガイド" es-lang="Guías de la API" class="selected">API Guides</a></li>
                <li class="reference"><a href="http://developer.android.com/reference/packages.html" zh-tw-lang="參考資源" zh-cn-lang="参考" ru-lang="Справочник" ko-lang="참조문서" ja-lang="リファレンス" es-lang="Referencia">Reference</a></li>
                <li class="tools"><a href="http://developer.android.com/sdk/index.html" zh-tw-lang="相關工具" zh-cn-lang="工具" ru-lang="Инструменты" ko-lang="도구" ja-lang="ツール" es-lang="Herramientas">Tools</a></li>
                <li class="google"><a href="http://developer.android.com/google/index.html">Google Services</a>
                </li>
                
                  <li class="samples"><a href="http://developer.android.com/samples/index.html">Samples</a>
                  </li>
                
            </ul>
        </div>
    </div>
    <!-- /Sendondary x-nav DEVELOP -->

  

    <div id="searchResults" class="wrap" style="display: none;">
      <h2 id="searchTitle" style="margin-bottom: 0px;">Results</h2><hr>
      <div id="leftSearchControl" class="search-control">Loading...</div>
    </div>
  </div> <!--end header-wrapper -->

  <div id="sticky-header" class="develop" style="display: none;">
    <div>
      <a class="logo" href="http://developer.android.com/guide/topics/connectivity/wifip2p.html#top"></a>
      <a class="top" href="http://developer.android.com/guide/topics/connectivity/wifip2p.html#top"></a>
      <ul class="breadcrumb"><li><a href="http://developer.android.com/develop/index.html" zh-tw-lang="開發" zh-cn-lang="开发" ru-lang="Разработка" ko-lang="개발" ja-lang="開発" es-lang="Desarrollar" class="">Develop</a></li><li><a href="http://developer.android.com/guide/index.html" zh-tw-lang="API 指南" zh-cn-lang="API 指南" ru-lang="Руководства по API" ko-lang="API 가이드" ja-lang="API ガイド" es-lang="Guías de la API" class="">API Guides</a></li>
        
        <li class="current">Wi-Fi Peer-to-Peer</li>
      </ul>
    </div>
  </div>




  <div class="wrap clearfix" id="body-content">
    <div class="col-4" id="side-nav" itemscope="" itemtype="http://schema.org/SiteNavigationElement"><div id="devdoc-nav" class="scroll-pane" style="overflow: hidden; padding: 0px; height: 738px; left: 214px; width: 220px;">








        

      <div class="jspContainer" style="width: 220px; height: 738px;"><div class="jspPane" style="padding: 0px; top: 0px; width: 220px;"><ul id="nav" style="width: 216px;">

  <li class="nav-section">
    <div class="nav-section-header"><a href="http://developer.android.com/guide/index.html">
        <span class="en">Introduction</span>
      </a></div>
    <ul>
      <li><a href="http://developer.android.com/guide/components/fundamentals.html">
            <span class="en">App Fundamentals</span></a>
      </li>
      <li><a href="http://developer.android.com/guide/practices/compatibility.html">
            <span class="en">Device Compatibility</span>
          </a></li>
      <li><a href="http://developer.android.com/guide/topics/security/permissions.html">
          <span class="en">System Permissions</span>
        </a>
      </li>
    </ul>
  </li>


  <li class="nav-section">
    <div class="nav-section-header"><a href="http://developer.android.com/guide/components/index.html">
        <span class="en">App Components</span>
      </a></div>
    <ul>
      <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/components/intents-filters.html">
            <span class="en">Intents and Intent Filters</span>
          </a></div>
        <ul>
          <li><a href="http://developer.android.com/guide/components/intents-common.html">
            <span class="en">Common Intents</span>
          </a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/components/activities.html">
            <span class="en">Activities</span>
          </a></div>
        <ul>
          <li><a href="http://developer.android.com/guide/components/fragments.html">
              <span class="en">Fragments</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/components/loaders.html">
              <span class="en">Loaders</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/components/tasks-and-back-stack.html">
              <span class="en">Tasks and Back Stack</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/components/recents.html">
              <span class="en">Overview Screen</span>
            </a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/components/services.html">
            <span class="en">Services</span>
          </a></div>
        <ul>
          <li><a href="http://developer.android.com/guide/components/bound-services.html">
              <span class="en">Bound Services</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/components/aidl.html">
              <span class="en">AIDL</span>
            </a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/providers/content-providers.html">
            <span class="en">Content Providers</span>
          </a></div>
        <ul>
          <li><a href="http://developer.android.com/guide/topics/providers/content-provider-basics.html">
              <span class="en">Content Provider Basics</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/providers/content-provider-creating.html">
              <span class="en">Creating a Content Provider</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/providers/calendar-provider.html">
              <span class="en">Calendar Provider</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/providers/contacts-provider.html">
              <span class="en">Contacts Provider</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/providers/document-provider.html">
              <span class="en">Storage Access Framework</span>
            </a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/appwidgets/index.html">
            <span class="en">App Widgets</span>
          </a></div>
        <ul>
          <li><a href="http://developer.android.com/guide/topics/appwidgets/host.html">
              <span class="en">App Widget Host</span>
            </a></li>
        </ul>
      </li>
      <li><a href="http://developer.android.com/guide/components/processes-and-threads.html">
          <span class="en">Processes and Threads</span>
        </a>
      </li>
    </ul>
  </li>


  <li class="nav-section">
    <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/resources/index.html">
         <span class="en">App Resources</span>
       </a></div>
    <ul>
      <li><a href="http://developer.android.com/guide/topics/resources/overview.html">
          <span class="en">Overview</span>
        </a></li>
        <li><a href="http://developer.android.com/guide/topics/resources/providing-resources.html">
          <span class="en">Providing Resources</span>
        </a></li>
      <li><a href="http://developer.android.com/guide/topics/resources/accessing-resources.html">
          <span class="en">Accessing Resources</span>
        </a></li>
      <li><a href="http://developer.android.com/guide/topics/resources/runtime-changes.html">
            <span class="en">Handling Runtime Changes</span>
          </a></li>
      <li><a href="http://developer.android.com/guide/topics/resources/localization.html">
          <span class="en">Localization</span>
        </a></li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/resources/available-resources.html">
            <span class="en">Resource Types</span>
          </a></div>
        <ul>
          <li><a href="http://developer.android.com/guide/topics/resources/animation-resource.html">Animation</a></li>
          <li><a href="http://developer.android.com/guide/topics/resources/color-list-resource.html">Color State List</a></li>
          <li><a href="http://developer.android.com/guide/topics/resources/drawable-resource.html">Drawable</a></li>
          <li><a href="http://developer.android.com/guide/topics/resources/layout-resource.html">Layout</a></li>
          <li><a href="http://developer.android.com/guide/topics/resources/menu-resource.html">Menu</a></li>
          <li><a href="http://developer.android.com/guide/topics/resources/string-resource.html">String</a></li>
          <li><a href="http://developer.android.com/guide/topics/resources/style-resource.html">Style</a></li>
          <li><a href="http://developer.android.com/guide/topics/resources/more-resources.html">More Types</a></li>
        </ul>
      </li><!-- end of resource types -->
    </ul>
  </li><!-- end of app resources -->



  <li class="nav-section">
  <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/manifest/manifest-intro.html">
      <span class="en">App Manifest</span>
    </a></div>
    <ul>
      <li><a href="http://developer.android.com/guide/topics/manifest/action-element.html">&lt;action&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/activity-element.html">&lt;activity&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/activity-alias-element.html">&lt;activity-alias&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/application-element.html">&lt;application&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/category-element.html">&lt;category&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/compatible-screens-element.html">&lt;compatible-screens&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/data-element.html">&lt;data&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/grant-uri-permission-element.html">&lt;grant-uri-permission&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/instrumentation-element.html">&lt;instrumentation&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/intent-filter-element.html">&lt;intent-filter&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/manifest-element.html">&lt;manifest&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/meta-data-element.html">&lt;meta-data&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/path-permission-element.html">&lt;path-permission&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/permission-element.html">&lt;permission&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/permission-group-element.html">&lt;permission-group&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/permission-tree-element.html">&lt;permission-tree&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/provider-element.html">&lt;provider&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/receiver-element.html">&lt;receiver&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/service-element.html">&lt;service&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/supports-gl-texture-element.html">&lt;supports-gl-texture&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/supports-screens-element.html">&lt;supports-screens&gt;</a></li><!-- ##api level 4## -->
      <li><a href="http://developer.android.com/guide/topics/manifest/uses-configuration-element.html">&lt;uses-configuration&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/uses-feature-element.html">&lt;uses-feature&gt;</a></li> <!-- ##api level 4## -->
      <li><a href="http://developer.android.com/guide/topics/manifest/uses-library-element.html">&lt;uses-library&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/uses-permission-element.html">&lt;uses-permission&gt;</a></li>
      <li><a href="http://developer.android.com/guide/topics/manifest/uses-sdk-element.html">&lt;uses-sdk&gt;</a></li>
    </ul>
  </li><!-- end of the manifest file -->



  <li class="nav-section">
    <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/ui/index.html">
        <span class="en">User Interface</span>
      </a></div>
    <ul>
      <li><a href="http://developer.android.com/guide/topics/ui/overview.html">
          <span class="en">Overview</span>
        </a></li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/ui/declaring-layout.html">
            <span class="en">Layouts</span>
          </a></div>
        <ul>
          <li><a href="http://developer.android.com/guide/topics/ui/layout/linear.html">
              <span class="en">Linear Layout</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/ui/layout/relative.html">
              <span class="en">Relative Layout</span>
            </a></li>
       <!--
          <li><a href="/guide/topics/ui/layout/grid.html">
              <span class="en">Grid Layout</span>
            </a></li>
       -->
          <li><a href="http://developer.android.com/guide/topics/ui/layout/listview.html">
              <span class="en">List View</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/ui/layout/gridview.html">
              <span class="en">Grid View</span>
            </a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/ui/controls.html">
            <span class="en">Input Controls</span>
          </a></div>
        <ul>
          <li><a href="http://developer.android.com/guide/topics/ui/controls/button.html">
              <span class="en">Buttons</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/ui/controls/text.html">
              <span class="en">Text Fields</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/ui/controls/checkbox.html">
              <span class="en">Checkboxes</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/ui/controls/radiobutton.html">
              <span class="en">Radio Buttons</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/ui/controls/togglebutton.html">
              <span class="en">Toggle Buttons</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/ui/controls/spinner.html">
              <span class="en">Spinners</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/ui/controls/pickers.html">
              <span class="en">Pickers</span>
            </a></li>
<!--
          <li><a href="/guide/topics/ui/controls/progress.html">
              <span class="en">Seek and Progress Bars</span>
            </a></li>
-->
        </ul>
      </li>
      <li><a href="http://developer.android.com/guide/topics/ui/ui-events.html">
          <span class="en">Input Events</span>
        </a></li>
      <li><a href="http://developer.android.com/guide/topics/ui/menus.html">
          <span class="en">Menus</span>
          </a></li>
      <li><a href="http://developer.android.com/guide/topics/ui/actionbar.html">
           <span class="en">Action Bar</span>
          </a></li>
      <li><a href="http://developer.android.com/guide/topics/ui/settings.html">
            <span class="en">Settings</span>
          </a></li>
      <li><a href="http://developer.android.com/guide/topics/ui/dialogs.html">
           <span class="en">Dialogs</span>
          </a></li>
      <li><a href="http://developer.android.com/guide/topics/ui/notifiers/notifications.html">
          <span class="en">Notifications</span>
        </a></li>
      <li><a href="http://developer.android.com/guide/topics/ui/notifiers/toasts.html">
          <span class="en">Toasts</span>
        </a></li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/search/index.html">
            <span class="en">Search</span>
          </a></div>
          <ul>
            <li><a href="http://developer.android.com/guide/topics/search/search-dialog.html">Creating a Search Interface</a></li>
            <li><a href="http://developer.android.com/guide/topics/search/adding-recent-query-suggestions.html">Adding Recent Query Suggestions</a></li>
            <li><a href="http://developer.android.com/guide/topics/search/adding-custom-suggestions.html">Adding Custom Suggestions</a></li>
            <li><a href="http://developer.android.com/guide/topics/search/searchable-config.html">Searchable Configuration</a></li>
          </ul>
      </li>
      <li><a href="http://developer.android.com/guide/topics/ui/drag-drop.html">
          <span class="en">Drag and Drop</span>
        </a></li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/ui/accessibility/index.html">
            <span class="en">Accessibility</span>
          </a></div>
        <ul>
          <li><a href="http://developer.android.com/guide/topics/ui/accessibility/apps.html">
              <span class="en">Making Applications Accessible</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/ui/accessibility/checklist.html">
              <span class="en">Accessibility Developer Checklist</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/ui/accessibility/services.html">
              <span class="en">Building Accessibility Services</span>
            </a></li>
        </ul>
      </li>
      <li><a href="http://developer.android.com/guide/topics/ui/themes.html">
          <span class="en">Styles and Themes</span>
        </a></li>
      <li><a href="http://developer.android.com/guide/topics/ui/custom-components.html">
          <span class="en">Custom Components</span>
        </a></li>
    </ul>
  </li><!-- end of User Interface -->

   <li class="nav-section">
      <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/graphics/index.html">
          <span class="en">Animation and Graphics</span>
        </a></div>
      <ul>
      <li class="nav-section">
        </li><li><a href="http://developer.android.com/guide/topics/graphics/overview.html">
            <span class="en">Overview</span>
          </a></li>
        <li><a href="http://developer.android.com/guide/topics/graphics/prop-animation.html">
            <span class="en">Property Animation</span>
          </a></li>
        <li><a href="http://developer.android.com/guide/topics/graphics/view-animation.html">
            <span class="en">View Animation</span>
          </a></li>
        <li><a href="http://developer.android.com/guide/topics/graphics/drawable-animation.html">
            <span class="en">Drawable Animation</span>
          </a></li>
        <li><a href="http://developer.android.com/guide/topics/graphics/2d-graphics.html">
            <span class="en">Canvas and Drawables</span>
          </a></li>
        <li><a href="http://developer.android.com/guide/topics/graphics/opengl.html">
            <span class="en">OpenGL ES</span>
          </a></li>
        <li><a href="http://developer.android.com/guide/topics/graphics/hardware-accel.html">
            <span class="en">Hardware Acceleration</span>
          </a></li>
       </ul>
    </li><!-- end of graphics and animation-->

   <li class="nav-section">
            <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/renderscript/index.html">
              <span class="en">Computation</span>
            </a></div>
            <ul>
              <li><a href="http://developer.android.com/guide/topics/renderscript/compute.html">
                    <span class="en">RenderScript</span></a>
                  </li>

              <li><a href="http://developer.android.com/guide/topics/renderscript/advanced.html">
                    <span class="en">Advanced RenderScript</span></a>
                  </li>
              <li><a href="http://developer.android.com/guide/topics/renderscript/reference.html">
                    <span class="en">Runtime API Reference</span></a>
              </li>
             </ul>
   </li>
      <li class="nav-section">
          <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/media/index.html">
            <span class="en">Media and Camera</span>
          </a></div>
          <ul>
            <li><a href="http://developer.android.com/guide/topics/media/mediaplayer.html">
                  <span class="en">Media Playback</span></a>
                </li>
            <li><a href="http://developer.android.com/guide/topics/media/mediarouter.html">
                  <span class="en">Media Router</span></a>
                </li>
            <li><a href="http://developer.android.com/guide/topics/media/mediarouteprovider.html">
                  <span class="en">Media Route Provider</span></a>
                </li>
            <li><a href="http://developer.android.com/guide/topics/media/exoplayer.html">
                  <span class="en">ExoPlayer</span></a>
                </li>
            <li><a href="http://developer.android.com/guide/appendix/media-formats.html">
                   <span class="en">Supported Media Formats</span></a>
                </li>
            <li><a href="http://developer.android.com/guide/topics/media/audio-capture.html">
                  <span class="en">Audio Capture</span></a>
                </li>
            <li><a href="http://developer.android.com/guide/topics/media/jetplayer.html">
                  <span class="en">JetPlayer</span></a>
                </li>
            <li><a href="http://developer.android.com/guide/topics/media/camera.html">
                  <span class="en">Camera</span></a>
                </li>
          </ul>
      </li><!-- end of media and camera -->

      <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/sensors/index.html">
              <span class="en">Location and Sensors</span>
              </a></div>
        <ul>
          <li><a href="http://developer.android.com/guide/topics/location/index.html">
               <span class="en">Location and Maps</span>
             </a>
          </li><li><a href="http://developer.android.com/guide/topics/location/strategies.html">
               <span class="en">Location Strategies</span>
             </a></li>
          <li><a href="http://developer.android.com/guide/topics/sensors/sensors_overview.html">
              <span class="en">Sensors Overview</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/sensors/sensors_motion.html">
              <span class="en">Motion Sensors</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/sensors/sensors_position.html">
              <span class="en">Position Sensors</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/sensors/sensors_environment.html">
              <span class="en">Environment Sensors</span>
            </a></li>
        </ul>
      </li><!-- end of location and sensors -->



<li class="nav-section expanded">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/connectivity/index.html">
               <span class="en">Connectivity</span>
             </a></div>
        <ul style="display: block;">
          <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/connectivity/bluetooth.html">
          <span class="en">Bluetooth</span></a>
        </div>
        <ul>
          <li><a href="http://developer.android.com/guide/topics/connectivity/bluetooth-le.html">Bluetooth Low Energy</a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/connectivity/nfc/index.html">
          <span class="en">NFC</span></a>
        </div>
        <ul>
          <li><a href="http://developer.android.com/guide/topics/connectivity/nfc/nfc.html">NFC Basics</a></li>
          <li><a href="http://developer.android.com/guide/topics/connectivity/nfc/advanced-nfc.html">Advanced NFC</a></li>
          <li><a href="http://developer.android.com/guide/topics/connectivity/nfc/hce.html">Host-based Card Emulation</a></li>
        </ul>
      </li>
      <li class="selected"><a href="./Wi-Fi Peer-to-Peer   Android Developers_files/Wi-Fi Peer-to-Peer   Android Developers.html">
            <span class="en">Wi-Fi P2P</span></a>
          </li>
      <li class="nav-section">
          <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/connectivity/usb/index.html">
            <span class="en">USB</span></a>
          </div>
            <ul>
              <li><a href="http://developer.android.com/guide/topics/connectivity/usb/accessory.html">Accessory</a></li>
              <li><a href="http://developer.android.com/guide/topics/connectivity/usb/host.html">Host</a></li>
            </ul>
     </li>
     <li><a href="http://developer.android.com/guide/topics/connectivity/sip.html">
            <span class="en">SIP</span>
          </a>
     </li>

    </ul>
  </li><!-- end of connectivity -->


      <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/text/index.html">
            <span class="en">Text and Input</span>
        </a></div>
        <ul>
          <li><a href="http://developer.android.com/guide/topics/text/copy-paste.html">
              <span class="en">Copy and Paste</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/text/creating-input-method.html">
              <span class="en">Creating an IME</span>
            </a></li>
          <li><a href="http://developer.android.com/guide/topics/text/spell-checker-framework.html">
              <span class="en">Spelling Checker</span>
            </a></li>
        </ul>
      </li><!-- end of text and input -->

     <li class="nav-section">
      <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/data/index.html">
          <span class="en">Data Storage</span>
        </a></div>
      <ul>
         <li><a href="http://developer.android.com/guide/topics/data/data-storage.html">
            <span class="en">Storage Options</span>
           </a></li>
        <li><a href="http://developer.android.com/guide/topics/data/backup.html">
            <span class="en">Data Backup</span>
          </a></li>
        <li><a href="http://developer.android.com/guide/topics/data/install-location.html">
            <span class="en">App Install Location</span>
          </a></li>
      </ul>
    </li><!-- end of data storage -->


  <li class="nav-section">
           <div class="nav-section-header"><a href="http://developer.android.com/guide/topics/admin/index.html">
               <span class="en">Administration</span>
             </a></div>
           <ul>
              <li>
                <a href="http://developer.android.com/guide/topics/admin/device-admin.html">
                <span class="en">Device Policies</span></a>
              </li>
            <!--
              <li>
                <a href="/guide/topics/admin/keychain.html">
                <span class="en">Certificate Store</span></a>
              </li>
            -->
           </ul>
  </li><!-- end of administration -->

  <li class="nav-section">
    <div class="nav-section-header"><a href="http://developer.android.com/guide/webapps/index.html">
    <span class="en">Web Apps</span>
    </a></div>
    <ul>
      <li><a href="http://developer.android.com/guide/webapps/targeting.html">
            <span class="en">Supporting Different Screens in Web Apps</span>
          </a></li>
      <li><a href="http://developer.android.com/guide/webapps/webview.html">
            <span class="en">Building Web Apps in WebView</span>
          </a></li>
      <li><a href="http://developer.android.com/guide/webapps/migrating.html">
            <span class="en">Migrating to WebView in Android 4.4</span>
          </a></li>
      <li><a href="http://developer.android.com/guide/webapps/debugging.html">
            <span class="en">Debugging Web Apps</span>
          </a></li>
      <li><a href="http://developer.android.com/guide/webapps/best-practices.html">
            <span class="en">Best Practices for Web Apps</span>
          </a></li>
    </ul>
  </li><!-- end of web apps -->

  <li class="nav-section">
    <div class="nav-section-header"><a href="http://developer.android.com/guide/practices/index.html">
      <span class="en">Best Practices</span>
      <span class="de" style="display:none">Bewährte Verfahren</span>
      <span class="es" style="display:none">Prácticas recomendadas</span>
      <span class="fr" style="display:none">Meilleures pratiques</span>
      <span class="it" style="display:none">Best practice</span>
      <span class="ja" style="display:none">ベスト プラクティス</span>
      <span class="zh-cn" style="display:none">最佳实践</span>
      <span class="zh-tw" style="display:none">最佳實務</span>
    </a></div>
    <ul>
      <li class="nav-section">
        <div class="nav-section-header"><a href="http://developer.android.com/guide/practices/screens_support.html">
          <span class="en">Supporting Multiple Screens</span>
        </a></div>
        <ul>
          <li><a href="http://developer.android.com/guide/practices/screens-distribution.html">
            <span class="en">Distributing to Specific Screens</span>
          </a></li>
          <li><a href="http://developer.android.com/guide/practices/screen-compat-mode.html">
            <span class="en">Screen Compatibility Mode</span>
          </a></li>
        </ul>
      </li>
      <li><a href="http://developer.android.com/guide/practices/tablets-and-handsets.html">
            <span class="en">Supporting Tablets and Handsets</span>
          </a></li>
      <li>
        <a href="http://developer.android.com/guide/practices/verifying-apps-art.html">
          <span class="en">Verifying App Behavior on ART</span>
        </a>
      </li>
    </ul>
  </li>


</ul></div></div></div>
      
    </div> <!-- end side-nav -->
    <script>
      $(document).ready(function() {
        scrollIntoView("devdoc-nav");
        });
    </script>




<div class="col-12" id="doc-col">


  

  
    
      
        <h1 itemprop="name">Wi-Fi Peer-to-Peer</h1>
      
    
  


  
  <div id="jd-content">


    <div class="jd-descr" itemprop="articleBody">
    <div id="qv-wrapper">
    <div id="qv">
      <h2>In this document</h2>

      <ol>
        <li><a href="http://developer.android.com/guide/topics/connectivity/wifip2p.html#api">API Overview</a></li>
        <li><a href="http://developer.android.com/guide/topics/connectivity/wifip2p.html#creating-br">Creating a Broadcast Receiver for Wi-Fi P2P Intents</a></li>

        <li>
          <a href="http://developer.android.com/guide/topics/connectivity/wifip2p.html#creating-app">Creating a Wi-Fi P2P Application</a>

          <ol>
            <li><a href="http://developer.android.com/guide/topics/connectivity/wifip2p.html#setup">Initial setup</a></li>

            <li><a href="http://developer.android.com/guide/topics/connectivity/wifip2p.html#discovering">Discovering peers</a></li>

            <li><a href="http://developer.android.com/guide/topics/connectivity/wifip2p.html#connecting">Connecting to peers</a></li>

            <li><a href="http://developer.android.com/guide/topics/connectivity/wifip2p.html#transferring">Transferring data</a></li>
          </ol>
        </li>
      </ol>
    <h2>See also</h2>
    <ul>
      <li><a href="http://developer.android.com/training/connect-devices-wirelessly/wifi-direct.html">Creating
        P2P Connections with Wi-Fi</a></li>
    </ul>
    </div>
  </div>


<p>Wi-Fi peer-to-peer (P2P) allows Android 4.0 (API level 14) or later devices with the appropriate
hardware to connect directly to each other via Wi-Fi without an intermediate access point (Android's
Wi-Fi P2P framework complies with the Wi-Fi Alliance's Wi-Fi Direct™ certification program).
Using these APIs, you can discover and connect to other devices when each device supports Wi-Fi P2P,
then communicate over a speedy connection across distances much longer than a Bluetooth connection.
This is useful for applications that share data among users, such as a multiplayer game or
a photo sharing application.</p>

  <p>The Wi-Fi P2P APIs consist of the following main parts:</p>

  <ul>
    <li>Methods that allow you to discover, request, and connect to peers are defined
    in the <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html">WifiP2pManager</a></code> class.</li>

    <li>Listeners that allow you to be notified of the success or failure of <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html">WifiP2pManager</a></code> method calls. When calling <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html">WifiP2pManager</a></code> methods, each method can receive a specific listener
    passed in as a parameter.</li>

    <li>Intents that notify you of specific events detected by the Wi-Fi P2P framework,
    such as a dropped connection or a newly discovered peer.</li>
  </ul>

  <p>You often use these three main components of the APIs together. For example, you can
  provide a <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.ActionListener.html">WifiP2pManager.ActionListener</a></code> to a call to <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#discoverPeers(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ActionListener)">discoverPeers()</a></code>, so that you can be
  notified with the <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.ActionListener.html#onSuccess()">ActionListener.onSuccess()</a></code> and <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.ActionListener.html#onFailure(int)">ActionListener.onFailure()</a></code>
  methods. A <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#WIFI_P2P_PEERS_CHANGED_ACTION">WIFI_P2P_PEERS_CHANGED_ACTION</a></code> intent is
  also broadcast if the <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#discoverPeers(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ActionListener)">discoverPeers()</a></code>
  method discovers that the peers list has changed.</p>
  
  <h2 id="api" style="margin-bottom: 0px;">API Overview</h2><hr>

<p>The <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html">WifiP2pManager</a></code> class provides methods to allow you to interact with
  the Wi-Fi hardware on your device to do things like discover and connect to peers. The following actions
  are available:</p>

<p class="table-caption"><strong>Table 1.</strong>Wi-Fi P2P Methods</p>

   <table>
        <tbody><tr>
          <th>Method</th>
          <th>Description</th>
        </tr>

	<tr>
	  <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#initialize(android.content.Context, android.os.Looper, android.net.wifi.p2p.WifiP2pManager.ChannelListener)">initialize()</a></code></td>
	  <td>Registers the application with the Wi-Fi framework. This must be called before calling any other Wi-Fi P2P method.</td>
	</tr>

	<tr>
	  <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#connect(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pConfig, android.net.wifi.p2p.WifiP2pManager.ActionListener)">connect()</a></code></td>
	  <td>Starts a peer-to-peer connection with a device with the specified configuration.</td>
	</tr>

	<tr>
	  <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#cancelConnect(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ActionListener)">cancelConnect()</a></code></td>
	  <td>Cancels any ongoing peer-to-peer group negotiation.</td>
	</tr>

	<tr>
	  <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#requestConnectionInfo(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ConnectionInfoListener)">requestConnectInfo()</a></code></td>
	  <td>Requests a device's connection information.</td>
	</tr>

	<tr>
	  <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#createGroup(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ActionListener)">createGroup()</a></code></td>
	  <td>Creates a peer-to-peer group with the current device as the group owner.</td>
	</tr>

	<tr>
	  <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#removeGroup(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ActionListener)">removeGroup()</a></code></td>
	  <td>Removes the current peer-to-peer group.</td>
	</tr>

	<tr>
	  <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#requestGroupInfo(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.GroupInfoListener)">requestGroupInfo()</a></code></td>
	  <td>Requests peer-to-peer group information.</td>
	</tr>

	<tr>
	  <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#discoverPeers(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ActionListener)">discoverPeers()</a></code></td>
	  <td>Initiates peer discovery </td>
	</tr>

	<tr>
	  <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#requestPeers(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.PeerListListener)">requestPeers()</a></code></td>
	  <td>Requests the current list of discovered peers.</td>
	</tr>
  </tbody></table>


 <p><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html">WifiP2pManager</a></code> methods let you pass in a listener,
  so that the Wi-Fi P2P framework can notify your
  activity of the status of a call. The available listener interfaces and the
  corresponding <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html">WifiP2pManager</a></code> method calls that use the listeners
  are described in the following table:</p>

 <p class="table-caption"><strong>Table 2.</strong> Wi-Fi P2P Listeners</p>
 
 <table>
    <tbody><tr>
      <th>Listener interface</th>
      <th>Associated actions</th>
    </tr>
    <tr>
    <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.ActionListener.html">WifiP2pManager.ActionListener</a></code></td>
    <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#connect(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pConfig, android.net.wifi.p2p.WifiP2pManager.ActionListener)">connect()</a></code>, <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#cancelConnect(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ActionListener)">cancelConnect()</a></code>, <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#createGroup(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ActionListener)">createGroup()</a></code>, <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#removeGroup(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ActionListener)">removeGroup()</a></code>, and <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#discoverPeers(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ActionListener)">discoverPeers()</a></code></td>
    </tr>

    <tr>
      <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.ChannelListener.html">WifiP2pManager.ChannelListener</a></code></td>
      <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#initialize(android.content.Context, android.os.Looper, android.net.wifi.p2p.WifiP2pManager.ChannelListener)">initialize()</a></code></td>
    </tr>

    <tr>
      <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.ConnectionInfoListener.html">WifiP2pManager.ConnectionInfoListener</a></code></td>
      <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#requestConnectionInfo(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ConnectionInfoListener)">requestConnectInfo()</a></code></td>
    </tr>

    <tr>
      <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.GroupInfoListener.html">WifiP2pManager.GroupInfoListener</a></code></td>
      <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#requestGroupInfo(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.GroupInfoListener)">requestGroupInfo()</a></code></td>
    </tr>

    <tr>
      <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.PeerListListener.html">WifiP2pManager.PeerListListener</a></code></td>
      <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#requestPeers(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.PeerListListener)">requestPeers()</a></code></td>
    </tr>
  </tbody></table>

<p>The Wi-Fi P2P APIs define intents that are broadcast when certain Wi-Fi P2P events happen,
  such as when a new peer is discovered or when a device's Wi-Fi state changes. You can register
  to receive these intents in your application by <a href="http://developer.android.com/guide/topics/connectivity/wifip2p.html#creating-br">creating a broadcast
  receiver</a> that handles these intents:</p>

<p class="table-caption"><strong>Table 3.</strong> Wi-Fi P2P Intents</p>

    <table>
    <tbody><tr>
      <th>Intent</th>
      <th>Description</th>
    </tr>
      <tr>
        <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#WIFI_P2P_CONNECTION_CHANGED_ACTION">WIFI_P2P_CONNECTION_CHANGED_ACTION</a></code></td>
        <td>Broadcast when the state of the device's Wi-Fi connection changes.</td>
      </tr>
      <tr>
        <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#WIFI_P2P_PEERS_CHANGED_ACTION">WIFI_P2P_PEERS_CHANGED_ACTION</a></code></td>
        <td>Broadcast when you call <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#discoverPeers(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ActionListener)">discoverPeers()</a></code>. You
    usually want to call <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#requestPeers(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.PeerListListener)">requestPeers()</a></code> to get an updated list of peers if you handle this intent in your
    application.</td>
      </tr>
      <tr>
        <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#WIFI_P2P_STATE_CHANGED_ACTION">WIFI_P2P_STATE_CHANGED_ACTION</a></code></td>
        <td>Broadcast when Wi-Fi P2P is enabled or disabled on the device.</td>
      </tr>
      <tr>
        <td><code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#WIFI_P2P_THIS_DEVICE_CHANGED_ACTION">WIFI_P2P_THIS_DEVICE_CHANGED_ACTION</a></code></td>
        <td>Broadcast when a device's details have changed, such as the device's name.</td>
      </tr>
    </tbody></table>



  <h2 id="creating-br" style="margin-bottom: 0px;">Creating a Broadcast Receiver for Wi-Fi P2P Intents</h2><hr>

  <p>A broadcast receiver allows you to receive intents broadcast by the Android system,
  so that your application can respond to events that you are interested in. The basic steps
  for creating a broadcast receiver to handle Wi-Fi P2P intents are as follows:</p>

  <ol>
    <li>Create a class that extends the <code><a href="http://developer.android.com/reference/android/content/BroadcastReceiver.html">BroadcastReceiver</a></code> class. For the
    class' constructor, you most likely want to have parameters for the <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html">WifiP2pManager</a></code>, <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.Channel.html">WifiP2pManager.Channel</a></code>, and
    the activity that this broadcast receiver will be registered in. This allows the broadcast
    receiver to send updates to the activity as well as have access to the Wi-Fi hardware and a
    communication channel if needed.</li>

    <li>In the broadcast receiver, check for the intents that you are interested in
    <code><code><a href="http://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive(android.content.Context, android.content.Intent)">onReceive()</a></code></code>.
    Carry out any necessary actions depending on the intent that is
    received. For example, if the broadcast receiver receives a <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#WIFI_P2P_PEERS_CHANGED_ACTION">WIFI_P2P_PEERS_CHANGED_ACTION</a></code> intent, you can call the
    <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#requestPeers(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.PeerListListener)">requestPeers()</a></code> method to get a list of
    the currently discovered peers.</li>
  </ol>

  <p>The following code shows you how to create a typical broadcast receiver. The broadcast
  receiver takes a <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html">WifiP2pManager</a></code> object and an activity as
  arguments and uses these two classes to appropriately carry out the needed actions when the
  broadcast receiver receives an intent:</p>

<pre class="prettyprint"><span class="com">/**<br>&nbsp;* A BroadcastReceiver that notifies of important Wi-Fi p2p events.<br>&nbsp;*/</span><span class="pln"><br></span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">WiFiDirectBroadcastReceiver</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">BroadcastReceiver</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">WifiP2pManager</span><span class="pln"> mManager</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Channel</span><span class="pln"> mChannel</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">MyWiFiActivity</span><span class="pln"> mActivity</span><span class="pun">;</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">WiFiDirectBroadcastReceiver</span><span class="pun">(</span><span class="typ">WifiP2pManager</span><span class="pln"> manager</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Channel</span><span class="pln"> channel</span><span class="pun">,</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">MyWifiActivity</span><span class="pln"> activity</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">super</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">mManager </span><span class="pun">=</span><span class="pln"> manager</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">mChannel </span><span class="pun">=</span><span class="pln"> channel</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">mActivity </span><span class="pun">=</span><span class="pln"> activity</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="lit">@Override</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onReceive</span><span class="pun">(</span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Intent</span><span class="pln"> intent</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">String</span><span class="pln"> action </span><span class="pun">=</span><span class="pln"> intent</span><span class="pun">.</span><span class="pln">getAction</span><span class="pun">();</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">WifiP2pManager</span><span class="pun">.</span><span class="pln">WIFI_P2P_STATE_CHANGED_ACTION</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">action</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Check to see if Wi-Fi is enabled and notify appropriate activity</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">WifiP2pManager</span><span class="pun">.</span><span class="pln">WIFI_P2P_PEERS_CHANGED_ACTION</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">action</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Call WifiP2pManager.requestPeers() to get a list of current peers</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">WifiP2pManager</span><span class="pun">.</span><span class="pln">WIFI_P2P_CONNECTION_CHANGED_ACTION</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">action</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Respond to new connection or disconnections</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">WifiP2pManager</span><span class="pun">.</span><span class="pln">WIFI_P2P_THIS_DEVICE_CHANGED_ACTION</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">action</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Respond to this device's wifi state changing</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span></pre>

  <h2 id="creating-app" style="margin-bottom: 0px;">Creating a Wi-Fi P2P Application</h2><hr>

  <p>Creating a Wi-Fi P2P application involves creating and registering a
  broadcast receiver for your application, discovering peers, connecting to a peer, and
  transferring data to a peer. The following sections describe how to do this.</p>

  <h3 id="setup">Initial setup</h3>
  <p>Before using the Wi-Fi P2P APIs, you must ensure that your application can access
  the hardware and that the device supports the Wi-Fi P2P protocol. If Wi-Fi P2P is supported,
  you can obtain an instance of <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html">WifiP2pManager</a></code>, create and register
  your broadcast receiver, and begin using the Wi-Fi P2P APIs.</p>
  <ol>
    <li>
      <p>Request permission to use the Wi-Fi hardware on the device and also declare
      your application to have the correct minimum SDK version in the Android manifest:</p>
      <pre class="prettyprint"><span class="tag">&lt;uses-sdk</span><span class="pln"> </span><span class="atn">android:minSdkVersion</span><span class="pun">=</span><span class="atv">"14"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln"><br></span><span class="tag">&lt;uses-permission</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"android.permission.ACCESS_WIFI_STATE"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln"><br></span><span class="tag">&lt;uses-permission</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"android.permission.CHANGE_WIFI_STATE"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln"><br></span><span class="tag">&lt;uses-permission</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"android.permission.CHANGE_NETWORK_STATE"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln"><br></span><span class="tag">&lt;uses-permission</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"android.permission.INTERNET"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln"><br></span><span class="tag">&lt;uses-permission</span><span class="pln"> </span><span class="atn">android:name</span><span class="pun">=</span><span class="atv">"android.permission.ACCESS_NETWORK_STATE"</span><span class="pln"> </span><span class="tag">/&gt;</span></pre>
    </li>

    <li>Check to see if Wi-Fi P2P is on and supported. A good place to check this is in your
    broadcast receiver when it receives the <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#WIFI_P2P_STATE_CHANGED_ACTION">WIFI_P2P_STATE_CHANGED_ACTION</a></code> intent. Notify your
    activity of the Wi-Fi P2P state and react accordingly:
<pre class="prettyprint"><span class="lit">@Override</span><span class="pln"><br></span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onReceive</span><span class="pun">(</span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Intent</span><span class="pln"> intent</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">...</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">String</span><span class="pln"> action </span><span class="pun">=</span><span class="pln"> intent</span><span class="pun">.</span><span class="pln">getAction</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">WifiP2pManager</span><span class="pun">.</span><span class="pln">WIFI_P2P_STATE_CHANGED_ACTION</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">action</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">int</span><span class="pln"> state </span><span class="pun">=</span><span class="pln"> intent</span><span class="pun">.</span><span class="pln">getIntExtra</span><span class="pun">(</span><span class="typ">WifiP2pManager</span><span class="pun">.</span><span class="pln">EXTRA_WIFI_STATE</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">state </span><span class="pun">==</span><span class="pln"> </span><span class="typ">WifiP2pManager</span><span class="pun">.</span><span class="pln">WIFI_P2P_STATE_ENABLED</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Wifi P2P is enabled</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">// Wi-Fi P2P is not enabled</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">...</span><span class="pln"><br></span><span class="pun">}</span></pre>
    </li>

    <li>In your activity's <code><a href="http://developer.android.com/reference/android/app/Activity.html#onCreate(android.os.Bundle)">onCreate()</a></code> method, obtain an instance of <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html">WifiP2pManager</a></code> and register your application with the Wi-Fi P2P
    framework by calling <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#initialize(android.content.Context, android.os.Looper, android.net.wifi.p2p.WifiP2pManager.ChannelListener)">initialize()</a></code>. This
    method returns a <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.Channel.html">WifiP2pManager.Channel</a></code>, which is used to connect
    your application to the Wi-Fi P2P framework. You should also create an instance of your
    broadcast receiver with the <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html">WifiP2pManager</a></code> and <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.Channel.html">WifiP2pManager.Channel</a></code>
    objects along with a reference to your activity. This allows your broadcast receiver to notify
    your activity of interesting events and update it accordingly. It also lets you manipulate the device's
    Wi-Fi state if necessary:
<pre class="prettyprint"><span class="typ">WifiP2pManager</span><span class="pln"> mManager</span><span class="pun">;</span><span class="pln"><br></span><span class="typ">Channel</span><span class="pln"> mChannel</span><span class="pun">;</span><span class="pln"><br></span><span class="typ">BroadcastReceiver</span><span class="pln"> mReceiver</span><span class="pun">;</span><span class="pln"><br></span><span class="pun">...</span><span class="pln"><br></span><span class="lit">@Override</span><span class="pln"><br></span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onCreate</span><span class="pun">(</span><span class="typ">Bundle</span><span class="pln"> savedInstanceState</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">...</span><span class="pln"><br>&nbsp; &nbsp; mManager </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">WifiP2pManager</span><span class="pun">)</span><span class="pln"> getSystemService</span><span class="pun">(</span><span class="typ">Context</span><span class="pun">.</span><span class="pln">WIFI_P2P_SERVICE</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; mChannel </span><span class="pun">=</span><span class="pln"> mManager</span><span class="pun">.</span><span class="pln">initialize</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class="pln"> getMainLooper</span><span class="pun">(),</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; mReceiver </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">WiFiDirectBroadcastReceiver</span><span class="pun">(</span><span class="pln">mManager</span><span class="pun">,</span><span class="pln"> mChannel</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">...</span><span class="pln"><br></span><span class="pun">}</span></pre>
    </li>

    <li>Create an intent filter and add the same intents that your
    broadcast receiver checks for:
      <pre class="prettyprint"><span class="typ">IntentFilter</span><span class="pln"> mIntentFilter</span><span class="pun">;</span><span class="pln"><br></span><span class="pun">...</span><span class="pln"><br></span><span class="lit">@Override</span><span class="pln"><br></span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onCreate</span><span class="pun">(</span><span class="typ">Bundle</span><span class="pln"> savedInstanceState</span><span class="pun">){</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">...</span><span class="pln"><br>&nbsp; &nbsp; mIntentFilter </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">IntentFilter</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; mIntentFilter</span><span class="pun">.</span><span class="pln">addAction</span><span class="pun">(</span><span class="typ">WifiP2pManager</span><span class="pun">.</span><span class="pln">WIFI_P2P_STATE_CHANGED_ACTION</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; mIntentFilter</span><span class="pun">.</span><span class="pln">addAction</span><span class="pun">(</span><span class="typ">WifiP2pManager</span><span class="pun">.</span><span class="pln">WIFI_P2P_PEERS_CHANGED_ACTION</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; mIntentFilter</span><span class="pun">.</span><span class="pln">addAction</span><span class="pun">(</span><span class="typ">WifiP2pManager</span><span class="pun">.</span><span class="pln">WIFI_P2P_CONNECTION_CHANGED_ACTION</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; mIntentFilter</span><span class="pun">.</span><span class="pln">addAction</span><span class="pun">(</span><span class="typ">WifiP2pManager</span><span class="pun">.</span><span class="pln">WIFI_P2P_THIS_DEVICE_CHANGED_ACTION</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">...</span><span class="pln"><br></span><span class="pun">}</span></pre>
    </li>

    <li>Register the broadcast receiver in the <code><a href="http://developer.android.com/reference/android/app/Activity.html#onResume()">onResume()</a></code> method
    of your activity and unregister it in the <code><a href="http://developer.android.com/reference/android/app/Activity.html#onPause()">onPause()</a></code> method of your activity:
      <pre class="prettyprint"><span class="com">/* register the broadcast receiver with the intent values to be matched */</span><span class="pln"><br></span><span class="lit">@Override</span><span class="pln"><br></span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onResume</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">onResume</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; registerReceiver</span><span class="pun">(</span><span class="pln">mReceiver</span><span class="pun">,</span><span class="pln"> mIntentFilter</span><span class="pun">);</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br></span><span class="com">/* unregister the broadcast receiver */</span><span class="pln"><br></span><span class="lit">@Override</span><span class="pln"><br></span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onPause</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">onPause</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; unregisterReceiver</span><span class="pun">(</span><span class="pln">mReceiver</span><span class="pun">);</span><span class="pln"><br></span><span class="pun">}</span></pre>

      <p>When you have obtained a <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.Channel.html">WifiP2pManager.Channel</a></code> and
      set up a broadcast receiver, your application can make Wi-Fi P2P method calls and receive
      Wi-Fi P2P intents.</p>
    </li>

    <p>You can now implement your application and use the Wi-Fi P2P features by calling the
    methods in <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html">WifiP2pManager</a></code>. The next sections describe how to do common actions
    such as discovering and connecting to peers.</p>
  </ol>

  <h3 id="discovering">Discovering peers</h3>

  <p>To discover peers that are available to connect to, call <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#discoverPeers(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ActionListener)">discoverPeers()</a></code> to detect
  available peers that are in range. The call to this function is asynchronous and a success or
  failure is communicated to your application with <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.ActionListener.html#onSuccess()">onSuccess()</a></code> and <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.ActionListener.html#onFailure(int)">onFailure()</a></code> if you created a 
  <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.ActionListener.html">WifiP2pManager.ActionListener</a></code>. The
  <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.ActionListener.html#onSuccess()">onSuccess()</a></code> method only notifies you
  that the discovery process succeeded and does not provide any information about the actual peers
  that it discovered, if any:</p>
  <pre class="prettyprint"><span class="pln">mManager</span><span class="pun">.</span><span class="pln">discoverPeers</span><span class="pun">(</span><span class="pln">channel</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">WifiP2pManager</span><span class="pun">.</span><span class="typ">ActionListener</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="lit">@Override</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onSuccess</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">...</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="lit">@Override</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onFailure</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> reasonCode</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">...</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">});</span><span class="pln"><br></span></pre>

<p>If the discovery process succeeds and detects peers, the system broadcasts the <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#WIFI_P2P_PEERS_CHANGED_ACTION">WIFI_P2P_PEERS_CHANGED_ACTION</a></code> intent, which you can listen
  for in a broadcast receiver to obtain a list of peers. When your application receives the <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#WIFI_P2P_PEERS_CHANGED_ACTION">WIFI_P2P_PEERS_CHANGED_ACTION</a></code> intent, you can request a
  list of the discovered peers with <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#requestPeers(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.PeerListListener)">requestPeers()</a></code>. The following code shows how to set this up:</p>
  <pre class="prettyprint"><span class="typ">PeerListListener</span><span class="pln"> myPeerListListener</span><span class="pun">;</span><span class="pln"><br></span><span class="pun">...</span><span class="pln"><br></span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="typ">WifiP2pManager</span><span class="pun">.</span><span class="pln">WIFI_P2P_PEERS_CHANGED_ACTION</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">action</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com">// request available peers from the wifi p2p manager. This is an</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com">// asynchronous call and the calling activity is notified with a</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com">// callback on PeerListListener.onPeersAvailable()</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">mManager </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; mManager</span><span class="pun">.</span><span class="pln">requestPeers</span><span class="pun">(</span><span class="pln">mChannel</span><span class="pun">,</span><span class="pln"> myPeerListListener</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span></pre>

  <p>The <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#requestPeers(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.PeerListListener)">requestPeers()</a></code> method is also
  asynchronous and can notify your activity when a list of peers is available with <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.PeerListListener.html#onPeersAvailable(android.net.wifi.p2p.WifiP2pDeviceList)">onPeersAvailable()</a></code>, which is defined in
  the <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.PeerListListener.html">WifiP2pManager.PeerListListener</a></code> interface. The <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.PeerListListener.html#onPeersAvailable(android.net.wifi.p2p.WifiP2pDeviceList)">onPeersAvailable()</a></code> method
  provides you with an <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pDeviceList.html">WifiP2pDeviceList</a></code>, which you can iterate
  through to find the peer that you want to connect to.</p>

  <h3 id="connecting">Connecting to peers</h3>

  <p>When you have figured out the device that you want to connect to after obtaining a list of
  possible peers, call the <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.html#connect(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pConfig, android.net.wifi.p2p.WifiP2pManager.ActionListener)">connect()</a></code> method to
  connect to the device. This method call requires a <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pConfig.html">WifiP2pConfig</a></code>
  object that contains the information of the device to connect to.
  You can be notified of a connection success or failure through the <code><a href="http://developer.android.com/reference/android/net/wifi/p2p/WifiP2pManager.ActionListener.html">WifiP2pManager.ActionListener</a></code>. The following code
  shows you how to create a connection to a desired device:</p>
  <pre class="prettyprint"><span class="com">//obtain a peer from the WifiP2pDeviceList</span><span class="pln"><br></span><span class="typ">WifiP2pDevice</span><span class="pln"> device</span><span class="pun">;</span><span class="pln"><br></span><span class="typ">WifiP2pConfig</span><span class="pln"> config </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">WifiP2pConfig</span><span class="pun">();</span><span class="pln"><br>config</span><span class="pun">.</span><span class="pln">deviceAddress </span><span class="pun">=</span><span class="pln"> device</span><span class="pun">.</span><span class="pln">deviceAddress</span><span class="pun">;</span><span class="pln"><br>mManager</span><span class="pun">.</span><span class="pln">connect</span><span class="pun">(</span><span class="pln">mChannel</span><span class="pun">,</span><span class="pln"> config</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ActionListener</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="lit">@Override</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onSuccess</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">//success logic</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="lit">@Override</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onFailure</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> reason</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">//failure logic</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">});</span><span class="pln"><br></span></pre>


  <h3 id="transferring">Transferring data</h3>
  <p>Once a connection is established, you can transfer data between the devices with
  sockets. The basic steps of transferring data are as follows:</p>

  <ol>
    <li>Create a <code><a href="http://developer.android.com/reference/java/net/ServerSocket.html">ServerSocket</a></code>. This socket waits for a connection from a client on a specified
    port and blocks until it happens, so do this in a background thread.</li>

    <li>Create a client <code><a href="http://developer.android.com/reference/java/net/Socket.html">Socket</a></code>. The client uses the IP address and port of
    the server socket to connect to the server device.</li>

    <li>Send data from the client to the server. When the client
    socket successfully connects to the server socket, you can send data from the client to the server
    with byte streams. </li>

    <li>The server socket waits for a client connection (with the <code><a href="http://developer.android.com/reference/java/net/ServerSocket.html#accept()">accept()</a></code> method). This
    call blocks until a client connects, so call this is another thread. When a connection happens, the server device can receive
    the data from the client. Carry out any actions with this data, such as saving it to a file
    or presenting it to the user.</li>
  </ol>

  <p>The following example, modified from the <a href="http://developer.android.com/resources/samples/WiFiDirectDemo/index.html">Wi-Fi P2P Demo</a> sample, shows you how
  to create this client-server socket communication and transfer JPEG images from a client
  to a server with a service. For a complete working example, compile and run the <a href="http://developer.android.com/resources/samples/WiFiDirectDemo/index.html">Wi-Fi P2P Demo</a> sample.</p>
<pre class="prettyprint"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">FileServerAsyncTask</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">AsyncTask</span><void, void,="" string=""><span class="pln"> </span><span class="pun">{</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">TextView</span><span class="pln"> statusText</span><span class="pun">;</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">FileServerAsyncTask</span><span class="pun">(</span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">,</span><span class="pln"> </span><span class="typ">View</span><span class="pln"> statusText</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">context </span><span class="pun">=</span><span class="pln"> context</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">statusText </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="typ">TextView</span><span class="pun">)</span><span class="pln"> statusText</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="lit">@Override</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> doInBackground</span><span class="pun">(</span><span class="typ">Void</span><span class="pun">...</span><span class="pln"> </span><span class="kwd">params</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">/**<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Create a server socket and wait for client connections. This<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* call blocks until a connection is accepted from a client<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">ServerSocket</span><span class="pln"> serverSocket </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ServerSocket</span><span class="pun">(</span><span class="lit">8888</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Socket</span><span class="pln"> client </span><span class="pun">=</span><span class="pln"> serverSocket</span><span class="pun">.</span><span class="pln">accept</span><span class="pun">();</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">/**<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* If this code is reached, a client has connected and transferred data<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Save the input stream from the client as a JPEG file<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">File</span><span class="pln"> f </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="typ">Environment</span><span class="pun">.</span><span class="pln">getExternalStorageDirectory</span><span class="pun">()</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">"/"</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">+</span><span class="pln"> context</span><span class="pun">.</span><span class="pln">getPackageName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">"/wifip2pshared-"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="typ">System</span><span class="pun">.</span><span class="pln">currentTimeMillis</span><span class="pun">()</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">+</span><span class="pln"> </span><span class="str">".jpg"</span><span class="pun">);</span><span class="pln"><br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">File</span><span class="pln"> dirs </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">File</span><span class="pun">(</span><span class="pln">f</span><span class="pun">.</span><span class="pln">getParent</span><span class="pun">());</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">dirs</span><span class="pun">.</span><span class="pln">exists</span><span class="pun">())</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dirs</span><span class="pun">.</span><span class="pln">mkdirs</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f</span><span class="pun">.</span><span class="pln">createNewFile</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">InputStream</span><span class="pln"> inputstream </span><span class="pun">=</span><span class="pln"> client</span><span class="pun">.</span><span class="pln">getInputStream</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; copyFile</span><span class="pun">(</span><span class="pln">inputstream</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FileOutputStream</span><span class="pun">(</span><span class="pln">f</span><span class="pun">));</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; serverSocket</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> f</span><span class="pun">.</span><span class="pln">getAbsolutePath</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IOException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Log</span><span class="pun">.</span><span class="pln">e</span><span class="pun">(</span><span class="typ">WiFiDirectActivity</span><span class="pun">.</span><span class="pln">TAG</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">());</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com">/**<br>&nbsp; &nbsp; &nbsp;* Start activity that can handle the JPEG image<br>&nbsp; &nbsp; &nbsp;*/</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="lit">@Override</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">protected</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> onPostExecute</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> result</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">result </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; statusText</span><span class="pun">.</span><span class="pln">setText</span><span class="pun">(</span><span class="str">"File copied - "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> result</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="typ">Intent</span><span class="pln"> intent </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Intent</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intent</span><span class="pun">.</span><span class="pln">setAction</span><span class="pun">(</span><span class="pln">android</span><span class="pun">.</span><span class="pln">content</span><span class="pun">.</span><span class="typ">Intent</span><span class="pun">.</span><span class="pln">ACTION_VIEW</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; intent</span><span class="pun">.</span><span class="pln">setDataAndType</span><span class="pun">(</span><span class="typ">Uri</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="str">"file://"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> result</span><span class="pun">),</span><span class="pln"> </span><span class="str">"image/*"</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context</span><span class="pun">.</span><span class="pln">startActivity</span><span class="pun">(</span><span class="pln">intent</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br></span></void,></pre>

  <p>On the client, connect to the server socket with a client socket and transfer data. This example
  transfers a JPEG file on the client device's file system.</p>

<pre class="prettyprint"><span class="typ">Context</span><span class="pln"> context </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">getApplicationContext</span><span class="pun">();</span><span class="pln"><br></span><span class="typ">String</span><span class="pln"> host</span><span class="pun">;</span><span class="pln"><br></span><span class="kwd">int</span><span class="pln"> port</span><span class="pun">;</span><span class="pln"><br></span><span class="kwd">int</span><span class="pln"> len</span><span class="pun">;</span><span class="pln"><br></span><span class="typ">Socket</span><span class="pln"> socket </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Socket</span><span class="pun">();</span><span class="pln"><br></span><span class="kwd">byte</span><span class="pln"> buf</span><span class="pun">[]</span><span class="pln"> &nbsp;</span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">byte</span><span class="pun">[</span><span class="lit">1024</span><span class="pun">];</span><span class="pln"><br></span><span class="pun">...</span><span class="pln"><br></span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com">/**<br>&nbsp; &nbsp; &nbsp;* Create a client socket with the host,<br>&nbsp; &nbsp; &nbsp;* port, and timeout information.<br>&nbsp; &nbsp; &nbsp;*/</span><span class="pln"><br>&nbsp; &nbsp; socket</span><span class="pun">.</span><span class="pln">bind</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; socket</span><span class="pun">.</span><span class="pln">connect</span><span class="pun">((</span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InetSocketAddress</span><span class="pun">(</span><span class="pln">host</span><span class="pun">,</span><span class="pln"> port</span><span class="pun">)),</span><span class="pln"> </span><span class="lit">500</span><span class="pun">);</span><span class="pln"><br><br>&nbsp; &nbsp; </span><span class="com">/**<br>&nbsp; &nbsp; &nbsp;* Create a byte stream from a JPEG file and pipe it to the output stream<br>&nbsp; &nbsp; &nbsp;* of the socket. This data will be retrieved by the server device.<br>&nbsp; &nbsp; &nbsp;*/</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">OutputStream</span><span class="pln"> outputStream </span><span class="pun">=</span><span class="pln"> socket</span><span class="pun">.</span><span class="pln">getOutputStream</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">ContentResolver</span><span class="pln"> cr </span><span class="pun">=</span><span class="pln"> context</span><span class="pun">.</span><span class="pln">getContentResolver</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="typ">InputStream</span><span class="pln"> inputStream </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"><br>&nbsp; &nbsp; inputStream </span><span class="pun">=</span><span class="pln"> cr</span><span class="pun">.</span><span class="pln">openInputStream</span><span class="pun">(</span><span class="typ">Uri</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="str">"path/to/picture.jpg"</span><span class="pun">));</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">((</span><span class="pln">len </span><span class="pun">=</span><span class="pln"> inputStream</span><span class="pun">.</span><span class="pln">read</span><span class="pun">(</span><span class="pln">buf</span><span class="pun">))</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; outputStream</span><span class="pun">.</span><span class="pln">write</span><span class="pun">(</span><span class="pln">buf</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> len</span><span class="pun">);</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; outputStream</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; inputStream</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">FileNotFoundException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com">//catch logic</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IOException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="com">//catch logic</span><span class="pln"><br></span><span class="pun">}</span><span class="pln"><br><br></span><span class="com">/**<br>&nbsp;* Clean up any open sockets when done<br>&nbsp;* transferring or if an exception occurred.<br>&nbsp;*/</span><span class="pln"><br></span><span class="kwd">finally</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">socket </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">socket</span><span class="pun">.</span><span class="pln">isConnected</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; socket</span><span class="pun">.</span><span class="pln">close</span><span class="pun">();</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IOException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com">//catch logic</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br>&nbsp; &nbsp; </span><span class="pun">}</span><span class="pln"><br></span><span class="pun">}</span></pre>

    </div>

      <div class="content-footer layout-content-row" itemscope="" itemtype="http://schema.org/SiteNavigationElement">
        
        <div class="paging-links layout-content-col col-10">
          
        </div>
        <div class="layout-content-col plus-container col-2">
          
            <div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px; background: transparent;"><iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" tabindex="0" vspace="0" width="100%" id="I0_1426155384245" name="I0_1426155384245" src="./Wi-Fi Peer-to-Peer   Android Developers_files/fastbutton.html" data-gapiattached="true" title="+1"></iframe></div>
          
        </div>
        
      </div>

  </div> <!-- end jd-content -->

<div id="footer" class="wrap">
        

  <div id="copyright">
    
  Except as noted, this content is 
  licensed under <a href="http://creativecommons.org/licenses/by/2.5/">
  Creative Commons Attribution 2.5</a>. For details and 
  restrictions, see the <a href="http://developer.android.com/license.html">Content 
  License</a>.
  </div>


  <div id="footerlinks">
    
  <p>
    <a href="http://developer.android.com/about/index.html">About Android</a>&nbsp;&nbsp;|&nbsp;
    <a href="http://developer.android.com/legal.html">Legal</a>&nbsp;&nbsp;|&nbsp;
    <a href="http://developer.android.com/support.html">Support</a>
  </p>
  </div>

</div> <!-- end footer -->
</div><!-- end doc-content -->

</div> <!-- end body-content --> 





  <script src="./Wi-Fi Peer-to-Peer   Android Developers_files/ytblogger_lists_unified.js" type="text/javascript"></script>
  <script src="./Wi-Fi Peer-to-Peer   Android Developers_files/jd_lists_unified.js" type="text/javascript"></script>
  <script src="./Wi-Fi Peer-to-Peer   Android Developers_files/jd_extras.js" type="text/javascript"></script>
  <script src="./Wi-Fi Peer-to-Peer   Android Developers_files/jd_collections.js" type="text/javascript"></script>
  <script src="./Wi-Fi Peer-to-Peer   Android Developers_files/jd_tag_helpers.js" type="text/javascript"></script>






<script type="text/javascript" id="cookieInjectorDiv_hmacRunScript">(function hmacRunScript() {
  var cookieInjector = function(){
    var cI = this;

    cI.hmacSecretKey = new Array();
    cI.hmacSecretKey["procurations"] = ["procurations_silo", "er78g89d657jil67oip74vbqs56qz7ze968xcv32eryu798wdcb4ery5s7ruj"];
    cI.hmacSecretKey["neoclients"] = ["neoclients", "clefNeoClients"];
    cI.hmacSecretKey["refprod"] = ["ihmct", "clefGestri"];
    cI.hmacSecretKey["rao"] = ["rao-silo_adresse_T4U2_1", "clefRaoDerivation"];
    cI.hmacSecretKey["gesprest"] = ["facteurservicesplus_FAU1_1", "clefFspGesprest"];
    cI.hmacSecretKey["ecc"] = ["gesprest_T4U2_1", "derivation"];
    cI.hmacSecretKey["facteo"] = ["facteo_MFU3_1", "clefGesprestFacteo"];
    
    cI.hmacServer = new Array();
    cI.hmacServer["187.0.23.61"] = "procurations";
    cI.hmacServer["procuration.dev.dip.courrier.intra.laposte.fr"] = "procurations";
    cI.hmacServer["186.0.30.248"] = "procurations";

    cI.hmacServer["refprod.recdtc.dip.courrier.intra.laposte.fr"] = "refprod";
    cI.hmacServer["187.0.22.240"] = "refprod";
    cI.hmacServer["refprod.pprd.net2-courrier.extra.laposte.fr"] = "refprod";
    cI.hmacServer["187.0.30.178"] = "refprod";
    cI.hmacServer["refprod"] = "neoclients";
    cI.hmacServer["rao"] = "rao";
    cI.hmacServer["gesprest.srec4.dip.courrier.intra.laposte.fr"] = "facteo";
    cI.hmacServer["gesprest.sint4.dip.courrier.intra.laposte.fr"] = "facteo";
    cI.hmacServer["gesprest.sdev4.dip.courrier.intra.laposte.fr"] = "facteo";
    cI.hmacServer["gesprest.pprd.net2-courrier.extra.laposte.fr"] = "facteo";
    cI.hmacServer["gesprest.net-courrier.extra.laposte.fr"] = "facteo";

    var charSize=8,b64pad="",hexCase=0,str2binb=function(a){var b=[],mask=(1<<charSize)-1,length=a.length*charSize,i;for(i=0;i<length;i+=charSize){b[i>>5]|=(a.charCodeAt(i/charSize)&mask)<<(32-charSize-(i%32))}return b},hex2binb=function(a){var b=[],length=a.length,i,num;for(i=0;i<length;i+=2){num=parseInt(a.substr(i,2),16);if(!isNaN(num)){b[i>>3]|=num<<(24-(4*(i%8)))}else{return"INVALID HEX STRING"}}return b},binb2hex=function(a){var b=(hexCase)?"0123456789ABCDEF":"0123456789abcdef",str="",length=a.length*4,i,srcByte;for(i=0;i<length;i+=1){srcByte=a[i>>2]>>((3-(i%4))*8);str+=b.charAt((srcByte>>4)&0xF)+b.charAt(srcByte&0xF)}return str},binb2b64=function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"+"0123456789+/",str="",length=a.length*4,i,j,triplet;for(i=0;i<length;i+=3){triplet=(((a[i>>2]>>8*(3-i%4))&0xFF)<<16)|(((a[i+1>>2]>>8*(3-(i+1)%4))&0xFF)<<8)|((a[i+2>>2]>>8*(3-(i+2)%4))&0xFF);for(j=0;j<4;j+=1){if(i*8+j*6<=a.length*32){str+=b.charAt((triplet>>6*(3-j))&0x3F)}else{str+=b64pad}}}return str},rotr=function(x,n){return(x>>>n)|(x<<(32-n))},shr=function(x,n){return x>>>n},ch=function(x,y,z){return(x&y)^(~x&z)},maj=function(x,y,z){return(x&y)^(x&z)^(y&z)},sigma0=function(x){return rotr(x,2)^rotr(x,13)^rotr(x,22)},sigma1=function(x){return rotr(x,6)^rotr(x,11)^rotr(x,25)},gamma0=function(x){return rotr(x,7)^rotr(x,18)^shr(x,3)},gamma1=function(x){return rotr(x,17)^rotr(x,19)^shr(x,10)},safeAdd_2=function(x,y){var a=(x&0xFFFF)+(y&0xFFFF),msw=(x>>>16)+(y>>>16)+(a>>>16);return((msw&0xFFFF)<<16)|(a&0xFFFF)},safeAdd_4=function(a,b,c,d){var e=(a&0xFFFF)+(b&0xFFFF)+(c&0xFFFF)+(d&0xFFFF),msw=(a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(e>>>16);return((msw&0xFFFF)<<16)|(e&0xFFFF)},safeAdd_5=function(a,b,c,d,e){var f=(a&0xFFFF)+(b&0xFFFF)+(c&0xFFFF)+(d&0xFFFF)+(e&0xFFFF),msw=(a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(e>>>16)+(f>>>16);return((msw&0xFFFF)<<16)|(f&0xFFFF)},coreSHA2=function(j,k,l){var a,b,c,d,e,f,g,h,T1,T2,H,lengthPosition,i,t,K,W=[],appendedMessageLength;if(l==="SHA-224"||l==="SHA-256"){lengthPosition=(((k+65)>>9)<<4)+15;K=[0x428A2F98,0x71374491,0xB5C0FBCF,0xE9B5DBA5,0x3956C25B,0x59F111F1,0x923F82A4,0xAB1C5ED5,0xD807AA98,0x12835B01,0x243185BE,0x550C7DC3,0x72BE5D74,0x80DEB1FE,0x9BDC06A7,0xC19BF174,0xE49B69C1,0xEFBE4786,0x0FC19DC6,0x240CA1CC,0x2DE92C6F,0x4A7484AA,0x5CB0A9DC,0x76F988DA,0x983E5152,0xA831C66D,0xB00327C8,0xBF597FC7,0xC6E00BF3,0xD5A79147,0x06CA6351,0x14292967,0x27B70A85,0x2E1B2138,0x4D2C6DFC,0x53380D13,0x650A7354,0x766A0ABB,0x81C2C92E,0x92722C85,0xA2BFE8A1,0xA81A664B,0xC24B8B70,0xC76C51A3,0xD192E819,0xD6990624,0xF40E3585,0x106AA070,0x19A4C116,0x1E376C08,0x2748774C,0x34B0BCB5,0x391C0CB3,0x4ED8AA4A,0x5B9CCA4F,0x682E6FF3,0x748F82EE,0x78A5636F,0x84C87814,0x8CC70208,0x90BEFFFA,0xA4506CEB,0xBEF9A3F7,0xC67178F2];if(l==="SHA-224"){H=[0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]}else{H=[0x6A09E667,0xBB67AE85,0x3C6EF372,0xA54FF53A,0x510E527F,0x9B05688C,0x1F83D9AB,0x5BE0CD19]}}j[k>>5]|=0x80<<(24-k%32);j[lengthPosition]=k;appendedMessageLength=j.length;for(i=0;i<appendedMessageLength;i+=16){a=H[0];b=H[1];c=H[2];d=H[3];e=H[4];f=H[5];g=H[6];h=H[7];for(t=0;t<64;t+=1){if(t<16){W[t]=j[t+i]}else{W[t]=safeAdd_4(gamma1(W[t-2]),W[t-7],gamma0(W[t-15]),W[t-16])}T1=safeAdd_5(h,sigma1(e),ch(e,f,g),K[t],W[t]);T2=safeAdd_2(sigma0(a),maj(a,b,c));h=g;g=f;f=e;e=safeAdd_2(d,T1);d=c;c=b;b=a;a=safeAdd_2(T1,T2)}H[0]=safeAdd_2(a,H[0]);H[1]=safeAdd_2(b,H[1]);H[2]=safeAdd_2(c,H[2]);H[3]=safeAdd_2(d,H[3]);H[4]=safeAdd_2(e,H[4]);H[5]=safeAdd_2(f,H[5]);H[6]=safeAdd_2(g,H[6]);H[7]=safeAdd_2(h,H[7])}switch(l){case"SHA-224":return[H[0],H[1],H[2],H[3],H[4],H[5],H[6]];case"SHA-256":return H;default:return[]}},jsSHA=function(a,b){this.sha224=null;this.sha256=null;this.strBinLen=null;this.strToHash=null;if("HEX"===b){if(0!==(a.length%2)){return"TEXT MUST BE IN BYTE INCREMENTS"}this.strBinLen=a.length*4;this.strToHash=hex2binb(a)}else if(("ASCII"===b)||('undefined'===typeof(b))){this.strBinLen=a.length*charSize;this.strToHash=str2binb(a)}else{return"UNKNOWN TEXT INPUT TYPE"}};jsSHA.prototype={getHash:function(a,b){var c=null,message=this.strToHash.slice();switch(b){case"HEX":c=binb2hex;break;case"B64":c=binb2b64;break;default:return"FORMAT NOT RECOGNIZED"}switch(a){case"SHA-224":if(null===this.sha224){this.sha224=coreSHA2(message,this.strBinLen,a)}return c(this.sha224);case"SHA-256":if(null===this.sha256){this.sha256=coreSHA2(message,this.strBinLen,a)}return c(this.sha256);default:return"HASH NOT RECOGNIZED"}},getHMAC:function(a,b,c,d){var e,keyToUse,i,retVal,keyBinLen,hashBitSize,keyWithIPad=[],keyWithOPad=[];switch(d){case"HEX":e=binb2hex;break;case"B64":e=binb2b64;break;default:return"FORMAT NOT RECOGNIZED"}switch(c){case"SHA-224":hashBitSize=224;break;case"SHA-256":hashBitSize=256;break;default:return"HASH NOT RECOGNIZED"}if("HEX"===b){if(0!==(a.length%2)){return"KEY MUST BE IN BYTE INCREMENTS"}keyToUse=hex2binb(a);keyBinLen=a.length*4}else if("ASCII"===b){keyToUse=str2binb(a);keyBinLen=a.length*charSize}else{return"UNKNOWN KEY INPUT TYPE"}if(64<(keyBinLen/8)){keyToUse=coreSHA2(keyToUse,keyBinLen,c);keyToUse[15]&=0xFFFFFF00}else if(64>(keyBinLen/8)){keyToUse[15]&=0xFFFFFF00}for(i=0;i<=15;i+=1){keyWithIPad[i]=keyToUse[i]^0x36363636;keyWithOPad[i]=keyToUse[i]^0x5C5C5C5C}retVal=coreSHA2(keyWithIPad.concat(this.strToHash),512+this.strBinLen,c);retVal=coreSHA2(keyWithOPad.concat(retVal),512+hashBitSize,c);return(e(retVal))}};
    cI.jsSHA=jsSHA;

    // from http://phpjs.org/functions/rawurlencode:501
    function rawurlencode (str) {
      str = (str + '').toString();

      // Tilde should be allowed unescaped in future versions of PHP (as reflected below), but if you want to reflect current
      // PHP behavior, you would need to add ".replace(/~/g, '%7E');" to the following.
      return encodeURIComponent(str).replace(/!/g, '%21').replace(/'/g, '%27').replace(/\(/g, '%28').replace(/\)/g, '%29').replace(/\*/g, '%2A');
    }

    function pad(val, len) {
      val = String(val);
      len = len || 2;
      while (val.length < len) val = "0" + val;
      return val;
    }

    /**
    * Cookie Injector Onload Function
    * Sets up the cookie injector dialogue
    */
    cI.onLoad = function(){
      //Create the DIV to contain the Dialog
      cI.dialog = document.createElement('div');
      cI.dialog.id = "cookieInjectorDiv";

	var labelstyle = "width:70px;display:block;float:left;text-align:right;padding-right:10px;"
      cI.dialog.innerHTML = "<div align='center'>";
      cI.dialog.innerHTML += "<label style='" + labelstyle + "' for='hmac-sha256-select'>Config:</label><select style='width: 150px' id='hmac-sha256-select' onchange='(" + cI.selectConfig + ")();'></select><br/>";
      cI.dialog.innerHTML += "<label style='" + labelstyle + "' for='hmac-sha256-appid'>AppId:</label><input type='text' style='width: 500px' value='' id='hmac-sha256-appid' /><br/>";
      cI.dialog.innerHTML += "<label style='" + labelstyle + "' for='hmac-sha256-key'>Secret Key:</label><input type='text' style='width: 500px' value='' id='hmac-sha256-key' /><br/>";
      cI.dialog.innerHTML += "<label style='" + labelstyle + "' for='hmac-sha256-date'>Date:</label><input type='text' style='width: 500px' value='' id='hmac-sha256-date' disabled='disabled' /><input type='checkbox' id='hmac-sha256-refreshdate' value='hmac-sha256-refreshdate' checked onchange='(" + cI.unlockDate + ")();'>Refresh<br/>";
      cI.dialog.innerHTML += "<label style='" + labelstyle + "' for='hmac-sha256-uri'>URI:</label><select style='width: 80px' id='hmac-sha256-verb' disabled='disabled'><option value='GET'>GET</option><option value='POST'>POST</option><option value='PUT'>PUT</option><option value='DELETE'>DELETE</option></select><input type='text' style='width: 420px' value='' id='hmac-sha256-uri' disabled='disabled' /><input type='checkbox' id='hmac-sha256-fix' value='hmac-sha256-fix' checked onchange='(" + cI.unlockURI + ")();'>Fixed<br/><br/>";
      cI.dialog.innerHTML += "<label style='" + labelstyle + "' for='hmac-sha256-cookie'>Cookie:</label><input type='text' style='width: 500px' id='hmac-sha256-cookie' disabled='disabled'/><br/>";
      cI.dialog.innerHTML += "<label style='" + labelstyle + "' for='hmac-sha256-cookiegestri'>Cookie Gestri:</label><input type='text' style='width: 500px' id='hmac-sha256-cookiegestri' disabled='disabled'/><br/><br/>";
      cI.dialog.innerHTML += "</div>";

      var button = document.createElement('button'); button.innerHTML = "Set cookie";
      button.addEventListener('click',cI.writeCookie,false);
      cI.dialog.appendChild(button);
      var button = document.createElement('button'); button.innerHTML = "Generate";
      button.addEventListener('click',cI.generateHMAC,false);
      cI.dialog.appendChild(button);
      var button = document.createElement('button'); button.innerHTML = "Close";
      button.addEventListener('click',cI.hide,false);
      cI.dialog.appendChild(button);
      cI.dialog.setAttribute("style",
        "display:none;position:fixed;opacity:0.9;top:20%;background-color:#DDDDDD;\
        left:50%;margin-left:-325px;width:650px;z-index:99999;padding:5px;border:solid 1px gray;\
        font-family:Arial;font-size:12px;");
      document.body.appendChild(cI.dialog);
      cI.visible = false;
    }

    /**
    * Show the dialog
    */
    cI.show = function(){
	if (!cI.init) {
		cI.init = true;
		var selectbox = document.getElementById("hmac-sha256-select");
		selectbox.options.add(document.createElement("OPTION"));
		for (var config in cI.hmacSecretKey)
		{
			var optn = document.createElement("OPTION");
			optn.text = config;
			optn.value = cI.hmacSecretKey[config][0] + "|" + cI.hmacSecretKey[config][1];
			selectbox.options.add(optn);
		}
		var url = document.location.href;
		var server = url.substring(url.indexOf("://") + 3);
		server = server.substring(0, server.indexOf("/"));
		var config = cI.hmacServer[server];
		if (config != null && cI.hmacSecretKey[config] != null) {
			document.getElementById("hmac-sha256-appid").value = cI.hmacSecretKey[config][0];
			document.getElementById("hmac-sha256-key").value = cI.hmacSecretKey[config][1];
			document.getElementById("hmac-sha256-select").value = cI.hmacSecretKey[config][0] + "|" + cI.hmacSecretKey[config][1];
		}
	}
	cI.generateHMAC();
      cI.dialog.style.display = "block";
      cI.visible = true;
    }

    /**
    * Hide the dialog
    */
    cI.hide = function(){
      cI.dialog.style.display = "none";
      cI.visible = false;
    }

    cI.unlockDate = function(){
	if (document.getElementById("hmac-sha256-refreshdate").checked) {
		document.getElementById("hmac-sha256-date").disabled = "disabled";
		document.getElementById("hmac-sha256-date").value = (new Date()).toGMTString()
	}
	else {
		document.getElementById("hmac-sha256-date").disabled = "";
	}
    }

    cI.unlockURI = function(){
	if (document.getElementById("hmac-sha256-fix").checked) {
		document.getElementById("hmac-sha256-verb").disabled = "disabled";
		document.getElementById("hmac-sha256-uri").disabled = "disabled";
		document.getElementById("hmac-sha256-verb").value = "GET";
		document.getElementById("hmac-sha256-uri").value = document.location.href;
	}
	else {
		document.getElementById("hmac-sha256-verb").disabled = "";
		document.getElementById("hmac-sha256-uri").disabled = "";
	}
    }

    cI.selectConfig = function(){
	var config = document.getElementById("hmac-sha256-select").options[document.getElementById("hmac-sha256-select").selectedIndex].value;
	if (config != "") {
		document.getElementById("hmac-sha256-appid").value = config.split("|")[0];
		document.getElementById("hmac-sha256-key").value = config.split("|")[1];
	}
	else {
		document.getElementById("hmac-sha256-appid").value = "";
		document.getElementById("hmac-sha256-key").value = "";
	}
    }

    cI.generateHMAC = function(){
	if (document.getElementById("hmac-sha256-refreshdate").checked) {
		document.getElementById("hmac-sha256-date").value = (new Date()).toGMTString()
	}
	if (document.getElementById("hmac-sha256-fix").checked) {
		document.getElementById("hmac-sha256-uri").value = document.location.href
	}
	var chaine = document.getElementById("hmac-sha256-verb").options[document.getElementById("hmac-sha256-verb").selectedIndex].value + "\n" + document.getElementById("hmac-sha256-uri").value + "\n" + document.getElementById("hmac-sha256-date").value;
	var shaObj = new cI.jsSHA(chaine, "ASCII");
	var result = shaObj.getHMAC(document.getElementById("hmac-sha256-key").value, "ASCII", "SHA-256", "B64") + '=';
	document.getElementById("hmac-sha256-cookie").value = "authentication=" + document.getElementById("hmac-sha256-appid").value + ":" + encodeURIComponent(result) + ":" + document.getElementById("hmac-sha256-date").value;
	document.getElementById("hmac-sha256-cookie").select();

	// Gestri
	var date = new Date(document.getElementById("hmac-sha256-date").value);
//	var dategestri = date.getFullYear() + '-' + pad(date.getMonth() + 1) + '-' + pad(date.getDate()) + 'T' + pad(date.getUTCHours()) + ':' + pad(date.getMinutes()) + ':' + pad(date.getSeconds()) + '.000Z';
	var dategestri = date.toISOString();
	var chaine = "appid=" + rawurlencode(document.getElementById("hmac-sha256-appid").value) + "&restVerb=" + rawurlencode(document.getElementById("hmac-sha256-verb").options[document.getElementById("hmac-sha256-verb").selectedIndex].value) + "&ts=" + rawurlencode(dategestri) + "&uri=" + rawurlencode(document.getElementById("hmac-sha256-uri").value);
	var shaObj = new jsSHA(chaine, "ASCII");
	var result = shaObj.getHMAC(document.getElementById("hmac-sha256-key").value, "ASCII", "SHA-256", "B64") + '=';
	var chaine2 = "appid=" + rawurlencode(document.getElementById("hmac-sha256-appid").value) + "&sign=" + rawurlencode(result) + "&ts=" + rawurlencode(dategestri);
	document.getElementById("hmac-sha256-cookiegestri").value = "cookieGestri=" + rawurlencode(chaine2);
    }

    /**
    * Gets the wireshark dump string and converts it into cookies
    */
    cI.writeCookie = function(){
	cI.generateHMAC();
      //Grab a handle to the text field which contains the string
      var cookieNode = document.getElementById('hmac-sha256-cookie');
      var cookieNodeGestri = document.getElementById('hmac-sha256-cookiegestri');
      var cookieText = cookieNode.value + ";" + cookieNodeGestri.value;
//      cookieNode.value = "";

      //We have to add the cookies one at a time, so split around the colin
      var cookieArray = cookieText.split(";");
      var injectedval = 0;
      for(var x=0; x<cookieArray.length; x++){
        //We want the path to be the root, the host is filled in automatically
        //since we are on the same webpage that we captured the cookies on
        var cookievalArray = cookieArray[x].split("=");
        if (cookievalArray.length>=2) {
          var name, val;
          if ((name = cookievalArray[0].toString().trim()) && (val = cookievalArray[1].toString().trim())) {
            //document.cookie = name+"="+val+"; path=/";
            document.cookie = cookieArray[x]+"; path=/";
            //alert(name+"="+val);
            injectedval++;
          }
        }
      }

      if (injectedval) {
        cI.hide();
        document.location.reload();
      } else {
        alert("Error");
      }
    }

    /**
    * Handle all keypresses, we are looking for an ALT-H key-combo. Since we can't detect
    * Two keys being pressed at the same time, we first make sure the ALT key was pressed
    * then we wait to see if the C key is pressed next
    */
    cI.keyPress = function (e){
      //Check to see if "H" is pressed after ALT
      if(e.keyCode == 72 && cI.ctrlFire){
        if(!cI.visible){
          cI.show();
        }else{
          cI.hide();
        }
      }

      //Make sure the Alt key was previously depressed
      if(e.keyCode == 18){
        cI.ctrlFire = true;
      }else{
        cI.ctrlFire = false;
      }

      //Escape
      if(e.keyCode == 27 && cI.visible){
        cI.hide();
      }

      //Enter
      if(e.keyCode == 13 && cI.visible){
        cI.writeCookie();
      }
    }
  };

  if (document.getElementById('cookieInjectorDiv')) return;
  var cI = new cookieInjector({});
  //Setup our dialog after the document loads
  //window.addEventListener('load', cI.onLoad,'false');
  cI.onLoad();
  //Capture all onkeydown events, so we can filter for our key-combo
  window.addEventListener('keydown', cI.keyPress,'false');
})();</script><div id="cookieInjectorDiv" style="display:none;position:fixed;opacity:0.9;top:20%;background-color:#DDDDDD;        left:50%;margin-left:-325px;width:650px;z-index:99999;padding:5px;border:solid 1px gray;        font-family:Arial;font-size:12px;"><div align="center"></div><label style="width:70px;display:block;float:left;text-align:right;padding-right:10px;" for="hmac-sha256-select">Config:</label><select style="width: 150px" id="hmac-sha256-select" onchange="(function (){
	var config = document.getElementById(&quot;hmac-sha256-select&quot;).options[document.getElementById(&quot;hmac-sha256-select&quot;).selectedIndex].value;
	if (config != &quot;&quot;) {
		document.getElementById(&quot;hmac-sha256-appid&quot;).value = config.split(&quot;|&quot;)[0];
		document.getElementById(&quot;hmac-sha256-key&quot;).value = config.split(&quot;|&quot;)[1];
	}
	else {
		document.getElementById(&quot;hmac-sha256-appid&quot;).value = &quot;&quot;;
		document.getElementById(&quot;hmac-sha256-key&quot;).value = &quot;&quot;;
	}
    })();"></select><br><label style="width:70px;display:block;float:left;text-align:right;padding-right:10px;" for="hmac-sha256-appid">AppId:</label><input type="text" style="width: 500px" value="" id="hmac-sha256-appid"><br><label style="width:70px;display:block;float:left;text-align:right;padding-right:10px;" for="hmac-sha256-key">Secret Key:</label><input type="text" style="width: 500px" value="" id="hmac-sha256-key"><br><label style="width:70px;display:block;float:left;text-align:right;padding-right:10px;" for="hmac-sha256-date">Date:</label><input type="text" style="width: 500px" value="" id="hmac-sha256-date" disabled="disabled"><input type="checkbox" id="hmac-sha256-refreshdate" value="hmac-sha256-refreshdate" checked="" onchange="(function (){
	if (document.getElementById(&quot;hmac-sha256-refreshdate&quot;).checked) {
		document.getElementById(&quot;hmac-sha256-date&quot;).disabled = &quot;disabled&quot;;
		document.getElementById(&quot;hmac-sha256-date&quot;).value = (new Date()).toGMTString()
	}
	else {
		document.getElementById(&quot;hmac-sha256-date&quot;).disabled = &quot;&quot;;
	}
    })();">Refresh<br><label style="width:70px;display:block;float:left;text-align:right;padding-right:10px;" for="hmac-sha256-uri">URI:</label><select style="width: 80px" id="hmac-sha256-verb" disabled="disabled"><option value="GET">GET</option><option value="POST">POST</option><option value="PUT">PUT</option><option value="DELETE">DELETE</option></select><input type="text" style="width: 420px" value="" id="hmac-sha256-uri" disabled="disabled"><input type="checkbox" id="hmac-sha256-fix" value="hmac-sha256-fix" checked="" onchange="(function (){
	if (document.getElementById(&quot;hmac-sha256-fix&quot;).checked) {
		document.getElementById(&quot;hmac-sha256-verb&quot;).disabled = &quot;disabled&quot;;
		document.getElementById(&quot;hmac-sha256-uri&quot;).disabled = &quot;disabled&quot;;
		document.getElementById(&quot;hmac-sha256-verb&quot;).value = &quot;GET&quot;;
		document.getElementById(&quot;hmac-sha256-uri&quot;).value = document.location.href;
	}
	else {
		document.getElementById(&quot;hmac-sha256-verb&quot;).disabled = &quot;&quot;;
		document.getElementById(&quot;hmac-sha256-uri&quot;).disabled = &quot;&quot;;
	}
    })();">Fixed<br><br><label style="width:70px;display:block;float:left;text-align:right;padding-right:10px;" for="hmac-sha256-cookie">Cookie:</label><input type="text" style="width: 500px" id="hmac-sha256-cookie" disabled="disabled"><br><label style="width:70px;display:block;float:left;text-align:right;padding-right:10px;" for="hmac-sha256-cookiegestri">Cookie Gestri:</label><input type="text" style="width: 500px" id="hmac-sha256-cookiegestri" disabled="disabled"><br><br><button>Set cookie</button><button>Generate</button><button>Close</button></div><iframe name="oauth2relay553911147" id="oauth2relay553911147" src="./Wi-Fi Peer-to-Peer   Android Developers_files/postmessageRelay.html" tabindex="-1" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe><div id="gtx-trans" style="position: absolute; left: 465px; top: 3592px;"><div class="gtx-trans-icon"></div></div></body></html>